(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{608:function(t,v,_){"use strict";_.r(v);var s=_(13),i=Object(s.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"性能优化方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#性能优化方案"}},[t._v("#")]),t._v(" 性能优化方案")]),t._v(" "),_("p",[t._v("总体可以分几个思路，压缩文件体积、加载策略优化、感官体验优化、减少http请求数")]),t._v(" "),_("ul",[_("li",[t._v("减少 HTTP 请求数，避免重定向")]),t._v(" "),_("li",[t._v("减少 DNS 查询(重点: DNS缓存、DNS预查询)")]),t._v(" "),_("li",[t._v("使⽤ CDN (将静态资源放在CDN上，就近访问)")]),t._v(" "),_("li",[t._v("图⽚懒加载 （一个图片就发1个请求，）")]),t._v(" "),_("li",[t._v("用雪碧图(精灵图)spirit图代替（多张图片拼接成1个图片，只发1次请求）")]),t._v(" "),_("li",[t._v("减少 DOM 元素数量，减少 DOM 操作")]),t._v(" "),_("li",[t._v("使⽤外部 JavaScript 和 CSS")]),t._v(" "),_("li",[t._v("把样式表放在 link 中，把 JavaScript 放在⻚⾯底部")]),t._v(" "),_("li",[t._v("压缩 JavaScript 、 CSS 、字体、图⽚等，打包的时候webpack之类的压缩")]),t._v(" "),_("li",[t._v("服务器端再开启Gzip压缩，字体裁剪")]),t._v(" "),_("li",[t._v("使⽤ iconfont （比图片性能更优，也可以用SVG图，比icon更好）")]),t._v(" "),_("li",[t._v("多域名分发划分内容到不同域名")]),t._v(" "),_("li",[t._v("尽量减少 iframe 使⽤，避免图⽚ src 为空")])]),t._v(" "),_("h3",{attrs:{id:"想要理解性能优化-就必须理解浏览器渲染页面的原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#想要理解性能优化-就必须理解浏览器渲染页面的原理"}},[t._v("#")]),t._v(" 想要理解性能优化，就必须理解浏览器渲染页面的原理")]),t._v(" "),_("p",[t._v("就是从输入url到显示页面的过程")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("输入url发起http请求，然后开始进行DNS解析（优化：预解析）")])]),t._v(" "),_("li",[_("strong",[t._v("建立TCP连接(三次握手，四次挥手，websocket等等)，")])]),t._v(" "),_("li",[_("strong",[t._v("建立起http、https连接，（https还要经过SSL/TLS 的一层加密），")])]),t._v(" "),_("li",[_("strong",[t._v("得到服务器的响应（响应头、状态码 200 404之类）")]),t._v("，")]),t._v(" "),_("li",[_("strong",[t._v("浏览器得到资源文件，开始解析，解析html生成dom，")])]),t._v(" "),_("li",[_("strong",[t._v("遇到link加载CSS同时继续解析（CSS的加载不会影响DOM的解析），遇到script标签需要等待js文件加载完成，js是会阻塞DOM的解析的（所以需要把js放在页面最底部），请求JS和CSS返回的顺序是未知的，就算先返回并且完成解析JS文件也是会发生阻塞，")])]),t._v(" "),_("li",[_("strong",[t._v("必须等到CSSOM构建完成后才能执行JS文件。因为JS是可以控制DOM和CSS样式的！！！")])]),t._v(" "),_("li",[_("strong",[t._v("DOM加载完成后还是要等CSSOM完成后才会渲染，生成render树 也就是页面开始渲染")])]),t._v(" "),_("li",[_("strong",[t._v("渲染这一块还可以展开讲的就是回流和重排。")])]),t._v(" "),_("li",[_("strong",[t._v("可以在script标签内添加defer和async进行异步解析，就不会阻塞DOM的解析，js的解析加载背后的原理有(v8引擎解析运行，AST->机器码->字节码，事件循环、垃圾回收和内存管理等等。)")])])]),t._v(" "),_("h2",{attrs:{id:"减少重排reflow"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#减少重排reflow"}},[t._v("#")]),t._v(" 减少重排reflow")]),t._v(" "),_("p",[t._v("重排/回流(reflow)是DOM的变化，代价远大于重绘(replain)")]),t._v(" "),_("p",[t._v("下面情况会导致reflow发生")]),t._v(" "),_("ul",[_("li",[t._v("1：改变窗口大小")]),t._v(" "),_("li",[t._v("2：改变文字大小")]),t._v(" "),_("li",[t._v("3：内容的改变，如用户在输入框中敲字")]),t._v(" "),_("li",[t._v("4：激活伪类，如:hover")]),t._v(" "),_("li",[t._v("5：操作class属性")]),t._v(" "),_("li",[t._v("6：脚本操作DOM")]),t._v(" "),_("li",[t._v("7：计算offsetWidth和offsetHeight")]),t._v(" "),_("li",[t._v("8：设置style属性")])]),t._v(" "),_("h2",{attrs:{id:"assets和static的区别"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#assets和static的区别"}},[t._v("#")]),t._v(" assets和static的区别")]),t._v(" "),_("p",[t._v("两个都是用于存放静态资源文件。但assets打包后会压缩体积，static不会")]),t._v(" "),_("ul",[_("li",[t._v("static")])]),t._v(" "),_("p",[t._v("放在static中的文件不会进行构建编译处理，也就不会压缩体积，在打包时效率会更高，但体积更大在服务器中就会占据更大的空间")]),t._v(" "),_("ul",[_("li",[t._v("assets")])]),t._v(" "),_("p",[t._v("放在assets中的文件会进行压缩体积、代码格式化，压缩后会放置在static中一同上传服务器。\n因此建议样式文件放在assets中进行打包，引入的第三方文件放到static中，因为引入的文件已经做过打包处理")])])}),[],!1,null,null,null);v.default=i.exports}}]);