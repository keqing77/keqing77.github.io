---
sidebar_position: 5
---

# useState


:::tip useState使用方法
`const [state, setState] = useState(initialState)`
1. 向一个组件添加状态
1. 基于之前的状态来更新状态
1. 更新状态中的对象和数组
1. 避免重新创建初始状态
1. 用一个键重设状态
1. 存储先前渲染的信息
:::



```jsx {4,7}
import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  function handleClick() {
    setCount(count + 1);
  }

  return (
    <button onClick={handleClick}>
      You pressed me {count} times
    </button>
  );
}
```

:::warning
- 直接修改数据，数据的值会改变，但是不会触发视图更新。这与React的响应式工作原理有关
- 我们使用setState()来更新状态，这会触发视图更新(重新渲染组件)。
- 组件每一创建都有自己的状态, 状态一旦发现改变就意味组件重新渲染, 每个状态都有自己的`快照`
- 也就是数组第二项，方法名可以是别的，但最好是setXXX()形式！
:::


## state是不可变的(immutable)
> 你可以把对象和数组放入状态。在React中，状态被认为是只读的，所以你应该替换它而不是突变你现有的对象

```jsx
// 🚩 Don't mutate an object in state like this:
form.firstName = 'Taylor';

// ✅ Replace state with a new object
setForm({
  ...form,
  firstName: 'Taylor'
});
```

## 受控组件和非受控组件 (只存在于表单元素)

### 受控组件
> 受控组件就是表单元素的value通过state(useState)来定义


### 非受控组件
> 非受控组件就是表单元素的value无法通过state获取，只能使用ref(useRef)来获取
